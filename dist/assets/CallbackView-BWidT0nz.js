import{x as D,i as L,d as W,y as E,b as q,c as R,a as T,o as M}from"./index-DWd9J3MH.js";const O=Symbol("$auth0");var _=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}function A(k,f){return k(f={exports:{}},f.exports),f.exports}var S=A(function(k,f){Object.defineProperty(f,"__esModule",{value:!0});var l=function(){function c(){var d=this;this.locked=new Map,this.addToLocked=function(u,h){var y=d.locked.get(u);y===void 0?h===void 0?d.locked.set(u,[]):d.locked.set(u,[h]):h!==void 0&&(y.unshift(h),d.locked.set(u,y))},this.isLocked=function(u){return d.locked.has(u)},this.lock=function(u){return new Promise(function(h,y){d.isLocked(u)?d.addToLocked(u,h):(d.addToLocked(u),h())})},this.unlock=function(u){var h=d.locked.get(u);if(h!==void 0&&h.length!==0){var y=h.pop();d.locked.set(u,h),y!==void 0&&setTimeout(y,0)}else d.locked.delete(u)}}return c.getInstance=function(){return c.instance===void 0&&(c.instance=new c),c.instance},c}();f.default=function(){return l.getInstance()}});C(S);var P=C(A(function(k,f){var l=_&&_.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(g){try{w(i.next(g))}catch(o){a(o)}}function p(g){try{w(i.throw(g))}catch(o){a(o)}}function w(g){g.done?r(g.value):new n(function(o){o(g.value)}).then(s,p)}w((i=i.apply(e,t||[])).next())})},c=_&&_.__generator||function(e,t){var n,i,r,a,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function p(w){return function(g){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||o[0]!==6&&o[0]!==2)){s=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(o[0]===6&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(x){o=[6,x],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([w,g])}}},d=_;Object.defineProperty(f,"__esModule",{value:!0});var u="browser-tabs-lock-key",h={key:function(e){return l(d,void 0,void 0,function(){return c(this,function(t){throw new Error("Unsupported")})})},getItem:function(e){return l(d,void 0,void 0,function(){return c(this,function(t){throw new Error("Unsupported")})})},clear:function(){return l(d,void 0,void 0,function(){return c(this,function(e){return[2,window.localStorage.clear()]})})},removeItem:function(e){return l(d,void 0,void 0,function(){return c(this,function(t){throw new Error("Unsupported")})})},setItem:function(e,t){return l(d,void 0,void 0,function(){return c(this,function(n){throw new Error("Unsupported")})})},keySync:function(e){return window.localStorage.key(e)},getItemSync:function(e){return window.localStorage.getItem(e)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(e){return window.localStorage.removeItem(e)},setItemSync:function(e,t){return window.localStorage.setItem(e,t)}};function y(e){return new Promise(function(t){return setTimeout(t,e)})}function v(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n}var m=function(){function e(t){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+v(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=t,e.waiters===void 0&&(e.waiters=[])}return e.prototype.acquireLock=function(t,n){return n===void 0&&(n=5e3),l(this,void 0,void 0,function(){var i,r,a,s,p,w,g;return c(this,function(o){switch(o.label){case 0:i=Date.now()+v(4),r=Date.now()+n,a=u+"-"+t,s=this.storageHandler===void 0?h:this.storageHandler,o.label=1;case 1:return Date.now()<r?[4,y(30)]:[3,8];case 2:return o.sent(),s.getItemSync(a)!==null?[3,5]:(p=this.id+"-"+t+"-"+i,[4,y(Math.floor(25*Math.random()))]);case 3:return o.sent(),s.setItemSync(a,JSON.stringify({id:this.id,iat:i,timeoutKey:p,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,y(30)];case 4:return o.sent(),(w=s.getItemSync(a))!==null&&(g=JSON.parse(w)).id===this.id&&g.iat===i?(this.acquiredIatSet.add(i),this.refreshLockWhileAcquired(a,i),[2,!0]):[3,7];case 5:return e.lockCorrector(this.storageHandler===void 0?h:this.storageHandler),[4,this.waitForSomethingToChange(r)];case 6:o.sent(),o.label=7;case 7:return i=Date.now()+v(4),[3,1];case 8:return[2,!1]}})})},e.prototype.refreshLockWhileAcquired=function(t,n){return l(this,void 0,void 0,function(){var i=this;return c(this,function(r){return setTimeout(function(){return l(i,void 0,void 0,function(){var a,s,p;return c(this,function(w){switch(w.label){case 0:return[4,S.default().lock(n)];case 1:return w.sent(),this.acquiredIatSet.has(n)?(a=this.storageHandler===void 0?h:this.storageHandler,(s=a.getItemSync(t))===null?(S.default().unlock(n),[2]):((p=JSON.parse(s)).timeRefreshed=Date.now(),a.setItemSync(t,JSON.stringify(p)),S.default().unlock(n),this.refreshLockWhileAcquired(t,n),[2])):(S.default().unlock(n),[2])}})})},1e3),[2]})})},e.prototype.waitForSomethingToChange=function(t){return l(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,new Promise(function(i){var r=!1,a=Date.now(),s=!1;function p(){if(s||(window.removeEventListener("storage",p),e.removeFromWaiting(p),clearTimeout(w),s=!0),!r){r=!0;var g=50-(Date.now()-a);g>0?setTimeout(i,g):i(null)}}window.addEventListener("storage",p),e.addToWaiting(p);var w=setTimeout(p,Math.max(0,t-Date.now()))})];case 1:return n.sent(),[2]}})})},e.addToWaiting=function(t){this.removeFromWaiting(t),e.waiters!==void 0&&e.waiters.push(t)},e.removeFromWaiting=function(t){e.waiters!==void 0&&(e.waiters=e.waiters.filter(function(n){return n!==t}))},e.notifyWaiters=function(){e.waiters!==void 0&&e.waiters.slice().forEach(function(t){return t()})},e.prototype.releaseLock=function(t){return l(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,n.sent()]}})})},e.prototype.releaseLock__private__=function(t){return l(this,void 0,void 0,function(){var n,i,r,a;return c(this,function(s){switch(s.label){case 0:return n=this.storageHandler===void 0?h:this.storageHandler,i=u+"-"+t,(r=n.getItemSync(i))===null?[2]:(a=JSON.parse(r)).id!==this.id?[3,2]:[4,S.default().lock(a.iat)];case 1:s.sent(),this.acquiredIatSet.delete(a.iat),n.removeItemSync(i),S.default().unlock(a.iat),e.notifyWaiters(),s.label=2;case 2:return[2]}})})},e.lockCorrector=function(t){for(var n=Date.now()-5e3,i=t,r=[],a=0;;){var s=i.keySync(a);if(s===null)break;r.push(s),a++}for(var p=!1,w=0;w<r.length;w++){var g=r[w];if(g.includes(u)){var o=i.getItemSync(g);if(o!==null){var x=JSON.parse(o);(x.timeRefreshed===void 0&&x.timeAcquired<n||x.timeRefreshed!==void 0&&x.timeRefreshed<n)&&(i.removeItemSync(g),p=!0)}}}p&&e.notifyWaiters()},e.waiters=void 0,e}();f.default=m})),I=A(function(k,f){var l=_&&_.__assign||function(){return l=Object.assign||function(v){for(var m,e=1,t=arguments.length;e<t;e++)for(var n in m=arguments[e])Object.prototype.hasOwnProperty.call(m,n)&&(v[n]=m[n]);return v},l.apply(this,arguments)};function c(v,m){if(!m)return"";var e="; "+v;return m===!0?e:e+"="+m}function d(v,m,e){return encodeURIComponent(v).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(m).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(t){if(typeof t.expires=="number"){var n=new Date;n.setMilliseconds(n.getMilliseconds()+864e5*t.expires),t.expires=n}return c("Expires",t.expires?t.expires.toUTCString():"")+c("Domain",t.domain)+c("Path",t.path)+c("Secure",t.secure)+c("SameSite",t.sameSite)}(e)}function u(v){for(var m={},e=v?v.split("; "):[],t=/(%[\dA-F]{2})+/gi,n=0;n<e.length;n++){var i=e[n].split("="),r=i.slice(1).join("=");r.charAt(0)==='"'&&(r=r.slice(1,-1));try{m[i[0].replace(t,decodeURIComponent)]=r.replace(t,decodeURIComponent)}catch{}}return m}function h(){return u(document.cookie)}function y(v,m,e){document.cookie=d(v,m,l({path:"/"},e))}f.__esModule=!0,f.encode=d,f.parse=u,f.getAll=h,f.get=function(v){return h()[v]},f.set=y,f.remove=function(v,m){y(v,"",l(l({},m),{expires:-1}))}});C(I),I.encode,I.parse,I.getAll;I.get;I.set;I.remove;new P;const b=()=>{console.error("Please ensure Auth0's Vue plugin is correctly installed.")},U={isLoading:L(!1),isAuthenticated:L(!1),user:L(void 0),idTokenClaims:L(void 0),error:L(null),loginWithPopup:b,loginWithRedirect:b,getAccessTokenSilently:b,getAccessTokenWithPopup:b,logout:b,checkSession:b,handleRedirectCallback:b};L(U);function F(){return D(O)}const H={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-500 to-primary-700"},B=W({__name:"CallbackView",setup(k){const f=q(),{isAuthenticated:l,isLoading:c}=F();return E(()=>{c.value||(l.value?f.push("/"):f.push("/login"))}),(d,u)=>(M(),R("div",H,u[0]||(u[0]=[T("div",{class:"text-center bg-white dark:bg-gray-800 p-8 rounded-lg shadow-xl"},[T("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),T("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"Processando login...")],-1)])))}});export{B as default};
